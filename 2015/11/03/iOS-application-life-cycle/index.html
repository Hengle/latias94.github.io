<!DOCTYPE html>
<html lang="zh-Hans">
  <head>
    
<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">



  <meta name="description" content="iOS 应用程序生命周期"/>




  <meta name="keywords" content="iOS, Objective-C, 萤火之森" />










  <link rel="alternate" href="/atom.xml" title="萤火之森">




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=2.6.0" />



<link rel="canonical" href="http://frankorz.com/2015/11/03/iOS-application-life-cycle/"/>


<link rel="stylesheet" type="text/css" href="/css/style.css?v=2.6.0" />



  <link rel="stylesheet" type="text/css" href="/lib/fancybox/jquery.fancybox.css" />




  
  <script id="baidu_analytics">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?91a6af339098c7b3314fd48d6640bbf8";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>



  <script id="google_analytics">
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-69634396-1', 'auto');
        ga('send', 'pageview');
  </script>


  <script id="baidu_push">
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>





  <script src="//cdn1.lncld.net/static/js/3.1.1/av-min.js"></script>
  <script id="leancloud">
    AV.init({
      appId: "v6QgYmEcmbiM4ijI41WdeQSg-gzGzoHsz",
      appKey: "Kfe1eyGyevT3hHuiDfm8Hw1G"
    });
  </script>





    <title> iOS 应用程序生命周期 - 萤火之森 </title>
  </head>

  <body><div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/." class="logo">萤火之森</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>

<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    
      <a href="/">
        <li class="mobile-menu-item">
          
          
            首页
          
        </li>
      </a>
    
      <a href="/archives/">
        <li class="mobile-menu-item">
          
          
            归档
          
        </li>
      </a>
    
      <a href="/tags">
        <li class="mobile-menu-item">
          
          
            标签
          
        </li>
      </a>
    
      <a href="/categories">
        <li class="mobile-menu-item">
          
          
            分类
          
        </li>
      </a>
    
      <a href="/books">
        <li class="mobile-menu-item">
          
          
            读书
          
        </li>
      </a>
    
      <a href="/leetcode">
        <li class="mobile-menu-item">
          
          
            LeetCode
          
        </li>
      </a>
    
  </ul>
</nav>

    <div class="container" id="mobile-panel">
      <header id="header" class="header"><div class="logo-wrapper">
  <a href="/." class="logo">萤火之森</a>
</div>

<nav class="site-navbar">
  
    <ul id="menu" class="menu">
      
        <li class="menu-item">
          <a class="menu-item-link" href="/">
            
            
              首页
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/archives/">
            
            
              归档
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/tags">
            
            
              标签
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/categories">
            
            
              分类
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/books">
            
            
              读书
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/leetcode">
            
            
              LeetCode
            
          </a>
        </li>
      
    </ul>
  
</nav>

      </header>

      <main id="main" class="main">
        <div class="content-wrapper">
          <div id="content" class="content">
            
  
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          iOS 应用程序生命周期
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2015-11-03
        </span>
        
          <div class="post-category">
            
              <a href="/categories/iOS基础/">iOS基础</a>
            
          </div>
        
        
        <div class="post-visits"
             data-url="/2015/11/03/iOS-application-life-cycle/"
             data-title="iOS 应用程序生命周期">
            阅读次数
          </div>
        
      </div>
    </header>

    
    
  <div class="post-toc" id="post-toc">
    <h2 class="post-toc-title">文章目录</h2>
    <div class="post-toc-content">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#应用生命周期"><span class="toc-text">应用生命周期</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#五种状态"><span class="toc-text">五种状态</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#iOS应用状态图"><span class="toc-text">iOS应用状态图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#应用回调的方法和本地通知"><span class="toc-text">应用回调的方法和本地通知</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#应用程序的运行状态"><span class="toc-text">应用程序的运行状态</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#非运行状态——应用启动场景"><span class="toc-text">非运行状态——应用启动场景</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Active和Inactive的切换"><span class="toc-text">Active和Inactive的切换</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#点击Home键——应用退出场景"><span class="toc-text">点击Home键——应用退出场景</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#状态跃迁的第一种情况"><span class="toc-text">状态跃迁的第一种情况</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#当应用程序进入后台时，我们应该做些什么呢？"><span class="toc-text">当应用程序进入后台时，我们应该做些什么呢？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#应用程序在后台时的内存使用"><span class="toc-text">应用程序在后台时的内存使用</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#状态跃迁的第二种情况"><span class="toc-text">状态跃迁的第二种情况</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#挂起重新运行场景"><span class="toc-text">挂起重新运行场景</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#内存清除——应用终止场景"><span class="toc-text">内存清除——应用终止场景</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#参考文章"><span class="toc-text">参考文章</span></a></li></ol>
    </div>
  </div>


    <div class="post-content">
      
        <h2 id="应用生命周期"><a href="#应用生命周期" class="headerlink" title="应用生命周期"></a>应用生命周期</h2><p>作为应用程序的委托对象，AppDelegate类在应用生命周期的不同阶段会回调不同的方法。</p>
<a id="more"></a>
<h3 id="五种状态"><a href="#五种状态" class="headerlink" title="五种状态"></a>五种状态</h3><p>iOS的应用程序一共有5种状态:</p>
<ul>
<li>Not Running(非运行状态)。应用没有运行或被系统终止。</li>
<li>Inactive(前台非活动状态)。应用正在进入前台状态，但是还不能接受事件处理。</li>
<li>Active(前台活动状态)。应用进入前台状态，能接受事件处理。</li>
<li>Background(后台状态)。应用进入后台后，依然能够执行代码。如果有可执行的代码，就会执行代码，如果没有可执行的代码或者将可执行的代码执行完毕，应用会马上进入挂起状态。有的程序经过特殊的请求后可以长期处于Backgroud状态。</li>
<li>Suspended(挂起状态)。处于挂起的应用进入一种“冷冻”状态,不能执行代码。如果系统内存不够,系统就把挂起的程序清除掉，为前台程序提供更多的内存，应用会被终止。</li>
</ul>
<h3 id="iOS应用状态图"><a href="#iOS应用状态图" class="headerlink" title="iOS应用状态图"></a>iOS应用状态图</h3><p><img src="http://ooo.0o0.ooo/2016/09/30/57ede16556a73.jpg" alt=""></p>
<h3 id="应用回调的方法和本地通知"><a href="#应用回调的方法和本地通知" class="headerlink" title="应用回调的方法和本地通知"></a>应用回调的方法和本地通知</h3><p>以下是状态跃迁过程中六个应用回调的方法和本地通知：</p>
<p><img src="http://ooo.0o0.ooo/2016/09/30/57ede17d89308.jpg" alt=""></p>
<h3 id="应用程序的运行状态"><a href="#应用程序的运行状态" class="headerlink" title="应用程序的运行状态"></a>应用程序的运行状态</h3><p>我们可以在“AppDelegate.m”文件中查看应用程序运行状态的方法，并为其添加日志输出，其中注释为官方注释，注意理解( ͒•ㅈ• ͒)</p>
<figure class="highlight mm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">"AppDelegate.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">AppDelegate</span> ()</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">AppDelegate</span></span></span><br><span class="line"></span><br><span class="line">- (<span class="built_in">BOOL</span>)application:(<span class="built_in">UIApplication</span> *)application didFinishLaunchingWithOptions:</span><br><span class="line">(<span class="built_in">NSDictionary</span> *)launchOptions &#123;</span><br><span class="line">    <span class="comment">// Override point for customization after application launch.</span></span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, <span class="string">@"application:didFinishLaunchingWithOptions:"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">YES</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)applicationWillResignActive:(<span class="built_in">UIApplication</span> *)application &#123;</span><br><span class="line">    <span class="comment">/* Sent when the application is about to move from active to inactive</span></span><br><span class="line"><span class="comment">    state. This can occur for certain types of temporary interruptions</span></span><br><span class="line"><span class="comment">    (such as an incoming phone call or SMS message) or when the user quits</span></span><br><span class="line"><span class="comment">    the application and it begins the transition to the background state.*/</span></span><br><span class="line">    <span class="comment">/* Use this method to pause ongoing tasks, disable timers,</span></span><br><span class="line"><span class="comment">    and throttle down OpenGL ES frame rates. Games should use this method</span></span><br><span class="line"><span class="comment">    to pause the game. */</span></span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, <span class="string">@"applicationWillResignActive:"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)applicationDidEnterBackground:(<span class="built_in">UIApplication</span> *)application &#123;</span><br><span class="line">    <span class="comment">/* Use this method to release shared resources, save user data,</span></span><br><span class="line"><span class="comment">    invalidate timers, and store enough application state information to</span></span><br><span class="line"><span class="comment">    restore your application to its current state in case it</span></span><br><span class="line"><span class="comment">    is terminated later.*/</span></span><br><span class="line">    <span class="comment">/* If your application supports background execution,</span></span><br><span class="line"><span class="comment">    this method is called instead of applicationWillTerminate:</span></span><br><span class="line"><span class="comment">    when the user quits.*/</span></span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, <span class="string">@"applicationDidEnterBackground:"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)applicationWillEnterForeground:(<span class="built_in">UIApplication</span> *)application &#123;</span><br><span class="line">    <span class="comment">/* Called as part of the transition from the background to the</span></span><br><span class="line"><span class="comment">    inactive state; here you can undo many of the changes made on</span></span><br><span class="line"><span class="comment">    entering the background.*/</span></span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, <span class="string">@"applicationWillEnterForeground:"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)applicationDidBecomeActive:(<span class="built_in">UIApplication</span> *)application &#123;</span><br><span class="line">    <span class="comment">/* Restart any tasks that were paused (or not yet started) while</span></span><br><span class="line"><span class="comment">    the application was inactive. If the application was previously in</span></span><br><span class="line"><span class="comment">    the background, optionally refresh the user interface.*/</span></span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, <span class="string">@"applicationDidBecomeActive:"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)applicationWillTerminate:(<span class="built_in">UIApplication</span> *)application &#123;</span><br><span class="line">    <span class="comment">/* Called when the application is about to terminate.</span></span><br><span class="line"><span class="comment">    Save data if appropriate. See also</span></span><br><span class="line"><span class="comment">    applicationDidEnterBackground:.*/</span></span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, <span class="string">@"applicationWillTerminate:"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<p>打开程序：<br><img src="http://ooo.0o0.ooo/2016/09/30/57ede165e7a3a.jpg" alt=""></p>
<p>按下Home键：<br><img src="http://ooo.0o0.ooo/2016/09/30/57ede168c2bcd.jpg" alt=""></p>
<p>从界面重点图标打开程序：<br><img src="http://ooo.0o0.ooo/2016/09/30/57ede165d5aaf.jpg" alt=""></p>
<h2 id="非运行状态——应用启动场景"><a href="#非运行状态——应用启动场景" class="headerlink" title="非运行状态——应用启动场景"></a>非运行状态——应用启动场景</h2><p>场景描述：用户点击应用图标的时候，可能是第一次启动这个应用，也可能是应用终止后再次启动。该场景的状态跃迁过程见下图，共经历两个阶段3个状态：Not running→Inactive→Active。</p>
<ul>
<li>在Not running→Inactive阶段。调用application:didFinishLaunchingWithOptions:方法，发出 UIApplicationDidFinishLaunchingNotification通知。</li>
<li>在Inactive→Active阶段。调用applicationDidBecomeActive:方法，发出UIApplicationDidBecomeActiveNotification通知。</li>
</ul>
<p><img src="http://ooo.0o0.ooo/2016/09/30/57ede1693df90.jpg" alt=""></p>
<h3 id="Active和Inactive的切换"><a href="#Active和Inactive的切换" class="headerlink" title="Active和Inactive的切换"></a>Active和Inactive的切换</h3><p>应用程序在前台时有2种状态：Active和Inactive。大多数情况下，Inactive状态只是其他两个状态切换时出现的短暂状态（不是任意两个状态之间的切换都会进入Inactive），如打开应用，它会从Not Running先进入Inactive再进入Active；如前后台应用切换时，Inactive会在Active和Background之间短暂出现。</p>
<p>但是也有其他情况，Active和Inactive可以在前台运行时进行切换，比如系统弹出Alert，此时应用会从Active切换到Inactive，直到用户确认再返回Active；再如用户拉下通知页，也会发生Active和Inactive的切换；还有来电但拒接、双击Home键但返回原应用等都不进入Background，而只是在Active和Inactive切换，这个在下面会讲到~</p>
<p>在应用状态跃迁的过程中，iOS系统会回调AppDelegate中的一些方法，并且发送一些通知。实际上，在应用的生命周期中用到的方法和通知很多。</p>
<h2 id="点击Home键——应用退出场景"><a href="#点击Home键——应用退出场景" class="headerlink" title="点击Home键——应用退出场景"></a>点击Home键——应用退出场景</h2><p>场景描述：应用处于运行状态(即Active状态)时，点击Home键或者有其他的应用导致当前应用中断。该场景的状态跃迁过程可以分成两种情况：可以在后台运行或者挂起，不可以在后台运行或者挂起。根据产品属性文件(Info.plist)中的相关属性 Application does not run in background 是与否可以控制这两种状态。如果采用文本编辑器打开Info.plist文件该设置项对应的键是UIApplicationExitsOnSuspend。</p>
<p><img src="http://ooo.0o0.ooo/2016/09/30/57ede17d0c6e9.jpg" alt=""></p>
<p>程序只要符合以下情况之一，只要进入后台或挂起状态就会终止：</p>
<ul>
<li>iOS4.0以前的系统</li>
<li>app是基于iOS4.0之前系统开发的。</li>
<li>设备不支持多任务</li>
<li>在Info.plist文件中，程序包含了UIApplicationExitsOnSuspend 键。</li>
</ul>
<p>app如果终止了，系统会调用app的代理的方法 <code>applicationWillTerminate:</code> 这样可以让你可以做一些清理工作，你可以保存一些数据或app的状态。这个方法也有5秒钟的限制，超时后方法会返回程序从内存中清除。<br>注意：用户可以手工关闭应用程序。</p>
<p>添加了UIApplicationExitsOnSuspend键，并设置Yes。打开应用后再按Home键退出：</p>
<p><img src="http://ooo.0o0.ooo/2016/09/30/57ede168d3047.jpg" alt=""></p>
<h3 id="状态跃迁的第一种情况"><a href="#状态跃迁的第一种情况" class="headerlink" title="状态跃迁的第一种情况"></a>状态跃迁的第一种情况</h3><p>应用可以在后台运行或者挂起，共经历3个阶段4个状态:Active → Inactive → Background → Suspended。</p>
<ul>
<li>在Active→Inactive阶段。调用applicationWillResignActive:方法,发出UIApplicationWillResignActiveNotification通知。</li>
<li>在Inactive→Background阶段。应用从非活动状态进入到后台(不涉及我们要重点说明的方法和通知)。</li>
<li>在Background→Suspended阶段。调用applicationDidEnterBackground:方法，发出UIApplicationDidEnterBackgroundNotification通知。</li>
</ul>
<p><img src="http://ooo.0o0.ooo/2016/09/30/57ede16903018.jpg" alt=""></p>
<h4 id="当应用程序进入后台时，我们应该做些什么呢？"><a href="#当应用程序进入后台时，我们应该做些什么呢？" class="headerlink" title="当应用程序进入后台时，我们应该做些什么呢？"></a>当应用程序进入后台时，我们应该做些什么呢？</h4><p>保存用户数据或状态信息，所有没写到磁盘的文件或信息，在进入后台时，最后都写到磁盘去，因为程序可能在后台被杀死，释放尽可能释放的内存。<br><code>applicationDidEnterBackgound:</code>方法有大概5秒的时间让你完成这些任务。如果超过时间还有未完成的任务，你的程序就会被终止而且从内存中清除。如果还需要长时间的运行任务，可以调用  <code>beginBackgroundTaskWithExpirationHandler</code>方法去请求后台运行时间和启动线程来运行长时间运行的任务。</p>
<h4 id="应用程序在后台时的内存使用"><a href="#应用程序在后台时的内存使用" class="headerlink" title="应用程序在后台时的内存使用"></a>应用程序在后台时的内存使用</h4><p>在后台时，每个应用程序都应该释放最大的内存。系统努力的保持更多的应用程序在后台同时运行。不过当内存不足时，会终止一些挂起的程序来回收内存，那些内存最大的程序首先被终止。<br>事实上，应用程序应该的对象如果不再使用了，那就应该尽快的去掉强引用，这样编译器可以回收这些内存。如果你想缓存一些对象提升程序的性能，你可以在进入后台时，把这些对象去掉强引用。<br>下面这样的对象应该尽快的去掉强引用：</p>
<ul>
<li>图片对象</li>
<li>你可以重新加载的 大的视频或数据文件</li>
<li>任何没用而且可以轻易创建的对象</li>
</ul>
<p>在后台时，为了减少程序占用的内存，系统会自动在回收一些系统帮助你开辟的内存。比如：</p>
<ul>
<li>系统回收Core Animation的后备存储。</li>
<li>去掉任何系统引用的缓存图片</li>
<li>去掉系统管理数据缓存强引用</li>
</ul>
<h3 id="状态跃迁的第二种情况"><a href="#状态跃迁的第二种情况" class="headerlink" title="状态跃迁的第二种情况"></a>状态跃迁的第二种情况</h3><p>应用不可以在后台运行或者挂起，共经历4个阶段5个状态:Active → Inactive → Background → Suspended→ Not running 。</p>
<ul>
<li>在Active→Inactivd阶段。应用由活动状态转为非活动状态(不涉及我们要重点说明的方法和通知)。</li>
<li>在Inactive→Background阶段。应用从非活动状态进入到后台(不涉及我们要重点说明的方法和通知)。</li>
<li>在Background→Suspended阶段。调用applicationDidEnterBackground:方法，发出UIApplicationDidEnterBackgroundNotification通知。</li>
<li>在Suspended→Not running阶段。调用applicationWillTerminate:方法，发出UIApplicationWillTerminateNotification通知。</li>
</ul>
<p><img src="http://ooo.0o0.ooo/2016/09/30/57ede16988cf1.jpg" alt=""></p>
<p>iOS在iOS 4之前不支持多任务，点击Home键时，应用会退出并中断；而在iOS 4之后(包括iOS 4)，操作系统能够支持多任务处理，点击Home键应用会进入后台但不会中断(内存不够的情况除外)。<br>应用在后台也可以进行部分处理工作，处理完成则进入挂起状态。</p>
<h2 id="挂起重新运行场景"><a href="#挂起重新运行场景" class="headerlink" title="挂起重新运行场景"></a>挂起重新运行场景</h2><p>挂起状态的应用重新运行。该场景的状态跃迁过程如图2-26所示,共经历3个阶段4个状态:<br>Suspended → Background → Inactive → Active。</p>
<ul>
<li>Suspended→Background阶段。应用从挂起状态进入后台(不涉及我们讲述的这几个方法和通知)。</li>
<li>Background→Inactive阶段。调用applicationWillEnterForeground:方法，发出UIApplicationWillEnterForegroundNotification通知。</li>
<li>Inactive→Active阶段。调用applicationDidBecomeActive:方法,发出UIApplicationDidBecomeActiveNotification通知。</li>
</ul>
<p><img src="http://ooo.0o0.ooo/2016/09/30/57ede1691ad6f.jpg" alt=""></p>
<h2 id="内存清除——应用终止场景"><a href="#内存清除——应用终止场景" class="headerlink" title="内存清除——应用终止场景"></a>内存清除——应用终止场景</h2><p>场景描述：应用在后台处理完成时进入挂起状态（这是一种休眠状态），如果这时发出低内存警告，为了满足其他应用对内存的需要，该应用就会被清除内存从而终止运行。</p>
<p><img src="http://ooo.0o0.ooo/2016/09/30/57ede16925455.jpg" alt=""></p>
<p>内存清除的时候应用终止运行。内存清除有两种情况，可能是系统强制清除内存，也可能是由使用者从任务栏中手动清除（即删掉应用）。内存清除后如果应用再次运行，上一次的运行状态不会被保存，相当于应用第一次运行。<br>在内存清除场景下，应用不会调用任何方法，也不会发出任何通知。</p>
<h2 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h2><p><a href="http://blog.csdn.net/totogo2010/article/details/8048652" target="_blank" rel="noopener">iOS应用程序生命周期(前后台切换,应用的各种状态)详解</a><br>《iOS开发指南：从零基础到App Store上架（第2版 ）》</p>

      
    </div>

    
      
      

  <div class="post-copyright">
    <p class="copyright-item">
      <span>原文作者: </span>
      <a href="http://frankorz.com">猫冬</a>
    </p>
    <p class="copyright-item">
      <span>原文链接: </span>
      <a href="http://frankorz.com/2015/11/03/iOS-application-life-cycle/">http://frankorz.com/2015/11/03/iOS-application-life-cycle/</a>
    </p>
    <p class="copyright-item">
      <span>许可协议: </span>
      
      <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank">知识共享署名-非商业性使用 4.0 国际许可协议</a>
    </p>
  </div>



      
      
    

    
      <footer class="post-footer">
        
          <div class="post-tags">
            
              <a href="/tags/iOS/">iOS</a>
            
              <a href="/tags/Objective-C/">Objective-C</a>
            
          </div>
        
        
        
  <nav class="post-nav">
    
      <a class="prev" href="/2016/02/04/阴历算法/">
        <i class="iconfont icon-left"></i>
        <span class="prev-text nav-default">阳历转阴历算法</span>
        <span class="prev-text nav-mobile">上一篇</span>
      </a>
    
    
      <a class="next" href="/2015/10/28/欢迎来到萤火之森/">
        <span class="next-text nav-default">欢迎来到萤火之森</span>
        <span class="prev-text nav-mobile">下一篇</span>
        <i class="iconfont icon-right"></i>
      </a>
    
  </nav>

      </footer>
    

  </article>


          </div>
          
  <div class="comments" id="comments">
    
      <div id="disqus_thread">
        <noscript>
          Please enable JavaScript to view the
          <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
      </div>
    
  </div>


        </div>
      </main>

      <footer id="footer" class="footer">

  <div class="social-links">
    
      
        
          <a href="mailto:frankorz@qq.com" class="iconfont icon-email" title="email"></a>
        
      
    
      
    
      
    
      
    
      
    
      
    
      
        
          <a href="https://github.com/Latias94" class="iconfont icon-github" title="github"></a>
        
      
    
      
        
          <a href="http://weibo.com/u/1825527674" class="iconfont icon-weibo" title="weibo"></a>
        
      
    
      
        
          <a href="https://www.zhihu.com/people/zhuang-ming-zhen" class="iconfont icon-zhihu" title="zhihu"></a>
        
      
    
      
    
    
    
      <a href="/atom.xml" class="iconfont icon-rss" title="rss"></a>
    
  </div>


<div class="copyright">
  <span class="power-by">
    由 <a class="hexo-link" href="https://hexo.io/">Hexo</a> 强力驱动
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    主题 - 
    <a class="theme-link" href="https://github.com/ahonn/hexo-theme-even">Even</a>
  </span>
  <span class="division">|</span>
  <span class="host-by">
    Hosted by <a class="hexo-link" href="https://coding.net/pages">Coding Pages</a>
  </span>
  <span class="copyright-year">
    
    &copy; 
     
      2015 - 
    
    2018

    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">猫冬</span>
  </span>
</div>

      </footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div>

    
  
  <script type="text/javascript">
    var disqus_config = function () {
        this.page.url = 'http://frankorz.com/2015/11/03/iOS-application-life-cycle/';
        this.page.identifier = '2015/11/03/iOS-application-life-cycle/';
        this.page.title = 'iOS 应用程序生命周期';
    };
    (function() {
    var d = document, s = d.createElement('script');

    s.src = '//frankorz.disqus.com/embed.js';

    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();  
  </script>




    
  





  
    <script type="text/javascript" src="/lib/jquery/jquery-3.1.1.min.js"></script>
  

  
    <script type="text/javascript" src="/lib/slideout/slideout.js"></script>
  

  
    <script type="text/javascript" src="/lib/fancybox/jquery.fancybox.pack.js"></script>
  


    <script type="text/javascript" src="/js/src/even.js?v=2.6.0"></script>
<script type="text/javascript" src="/js/src/bootstrap.js?v=2.6.0"></script>

  <script src="/live2dw/lib/L2Dwidget.min.js?0c58a1486de42ac6cc1c59c7d98ae887"></script><script>L2Dwidget.init({"model":{"scale":1,"hHeadPos":0.5,"vHeadPos":0.618},"display":{"superSample":2,"width":120,"height":240,"position":"left","hOffset":0,"vOffset":-20},"mobile":{"show":false,"scale":0.5},"react":{"opacityDefault":0.7,"opacityOnHover":0.2},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>
